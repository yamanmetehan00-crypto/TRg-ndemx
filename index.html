<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>GündemX – Gündeme Net Bakış</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --primary:#0066ff;
  --dark:#0b1220;
  --bg:#f4f7fb;
  --text:#1e293b;
}
*{box-sizing:border-box;}
body{margin:0;font-family:Inter,Arial,sans-serif;background:var(--bg);color:var(--text);}
a{text-decoration:none;color:inherit;}

/* LOADING */
#loading-screen{
position:fixed; inset:0; background:#fff;
display:flex; align-items:center; justify-content:center; z-index:9999;
}
.x-loader{
font-size:140px; font-weight:900; color:transparent;
-webkit-text-stroke:4px var(--primary);
background:linear-gradient(to top,var(--primary) 0%,var(--primary) 50%,transparent 50%);
background-size:100% 200%; background-position:bottom;
-webkit-background-clip:text; background-clip:text;
animation:fillX 2.5s ease forwards;
}
@keyframes fillX{from{background-position:bottom} to{background-position:top}}

/* HEADER */
header{
background:var(--dark); color:#fff;
padding:14px 20px; display:flex;
justify-content:space-between; align-items:center;
flex-wrap: wrap;
}
.logo{font-size:26px;font-weight:800}
.logo span{color:var(--primary)}
.social-header{display:flex;gap:10px;margin-left:12px}
.social-link{text-decoration:none;color:#fff;background:var(--primary);padding:4px 8px;border-radius:4px;font-weight:600;transition:all 0.3s ease}
.social-link:hover{background:#004fcc;transform:scale(1.05)}
nav a{margin-left:16px;font-size:14px;opacity:.9}
@media(max-width:768px){header{flex-direction:column;align-items:center} .social-header{margin:8px 0;justify-content:center} nav{display:none}}

/* MAIN */
.container{max-width:1200px;margin:auto;padding:16px;}
.grid{display:grid;grid-template-columns:1fr;gap:20px;}
.box{background:#fff;padding:20px;margin-bottom:20px;}
.box h2{border-bottom:2px solid var(--primary);padding-bottom:6px;margin-bottom:14px;}
.provinces{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px;}
.provinces a{background:#f8f9fb;padding:10px;text-align:center;border:1px solid #e5e7eb;font-size:13px;}

/* SLIDER */
.top-slider{position:relative;overflow:hidden;width:100%;height:300px;margin-bottom:20px;border-radius:12px}
.slide{width:100%;height:100%;position:absolute;top:0;left:100%;transition:left 0.5s ease-in-out;display:flex;align-items:flex-end}
.slide.active{left:0}
.slide img{width:100%;height:100%;object-fit:cover;border-radius:12px}
.slide-content{position:absolute;bottom:20px;left:20px;color:#fff;background:rgba(0,0,0,0.4);padding:12px;border-radius:6px}
.slide-content h2{margin:0;font-size:22px}
.slide-content p{margin:4px 0 0;font-size:14px}

/* NEWS CARD */
.news-card{display:flex;gap:12px;background:#fff;border-radius:10px;padding:10px;align-items:center;box-shadow:0 6px 16px rgba(0,0,0,0.05);transition:transform 0.2s ease,box-shadow 0.2s ease;cursor:pointer}
.news-card:hover{transform:translateY(-2px);box-shadow:0 10px 22px rgba(0,0,0,0.08)}
.news-card img{width:90px;height:70px;object-fit:cover;border-radius:8px}
.news-card h3{font-size:15px;margin:0 0 6px;line-height:1.3}
.news-card span{font-size:12px;color:#64748b}
.news-card p{font-size:13px;color:#555;line-height:1.4}
.news-list{display:flex;flex-direction:column;gap:14px}

/* CURRENCY CARD */
.currency-card{background:#fff;border-top:2px solid var(--primary);padding:8px 12px;border-radius:6px 6px 0 0;width:100%;max-width:350px;margin:20px auto 0 auto;box-shadow:0 2px 6px rgba(0,0,0,0.08)}
.currency-item{display:flex;justify-content:space-between;margin-bottom:4px}
.currency-item span:first-child{font-weight:600;color:#1e293b}
.currency-item span:last-child{color:var(--primary)}

/* FOOTER */
footer{background:var(--dark);color:#aaa;padding:20px;text-align:center;font-size:13px}

/* BREAKING NEWS */
.breaking-news-container {
width: 100%; background-color: #0b1220; overflow: hidden; white-space: nowrap;
border-top: 3px solid #0066ff; border-bottom: 3px solid #0066ff; padding: 8px 0;
}
.breaking-news { display: inline-block; color: #00aaff; font-weight: 600; font-size: 16px; position: relative; left: 100%; animation: marquee 15s linear infinite; }
.breaking-news:hover { animation-play-state: paused; }
@keyframes marquee { 0%{left:100%}100%{left:-100%}}

/* MODERN KATEGORİLER */
.categories-section {
margin: 35px 0;
}
.categories-title {
font-size: 28px;
font-weight: 700;
color: #0b1220;
text-align: right;
position: relative;
display: inline-block;
margin-bottom: 30px;
padding-bottom: 6px;
}
.categories-title::after {
content: "";
position: absolute;
bottom: 0;
right: 0;
width: 50px;
height: 4px;
background-color: #0066ff;
border-radius: 2px;
}
.categories-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
gap: 25px;
}
.category-card {
position: relative;
border-radius: 16px;
overflow: hidden;
box-shadow: 0 6px 18px rgba(11, 60, 93, 0.08);
cursor: pointer;
transition: transform 0.3s ease, box-shadow 0.3s ease;
background: #fff;
display: flex;
flex-direction: column;
}
.category-card::before {
content: "";
position: absolute;
left: 0;
top: 0;
width: 6px;
height: 100%;
background: #0066ff;
}
.category-card:hover {
transform: translateY(-6px);
box-shadow: 0 12px 28px rgba(11, 60, 93, 0.15);
}
.category-card img {
width: 100%;
height: 160px;
object-fit: cover;
transition: transform 0.3s ease;
}
.category-card:hover img {
transform: scale(1.05);
}
.category-content {
padding: 16px;
display: flex;
flex-direction: column;
gap: 6px;
}
.category-name {
font-size: 13px;
font-weight: 600;
color: #0066ff;
text-transform: uppercase;
letter-spacing: 1px;
}
.category-content h3 {
font-size: 18px;
color: #0b1220;
margin: 0;
line-height: 1.3;
}
.category-content p {
font-size: 14px;
color: #555;
line-height: 1.4;
}
</style>
</head>
<body>

<!-- LOADING -->
<div id="loading-screen"><div class="x-loader">X</div></div>

<header>
<div class="logo">Gündem<span>X</span></div>
<div class="social-header">
  <a href="hava-durumu.html" class="social-link">Hava Durumu</a>
  <a href="biyografiler.html" class="social-link">Biyografiler</a>
</div>
<div class="breaking-news-container">
  <div class="breaking-news" id="breakingNews"></div>
</div>
<nav>
  <a href="index.html">Gündem</a>
  <a href="il.html">Siyaset</a>
  <a href="il.html">Halkın Sesi</a>
  <a href="il.html">Gençlik</a>
  <a href="index.html#analiz">Analiz</a>
</nav>
</header>

<div class="top-slider" id="top-slider"></div>
<div class="grid">
<div>
  <div class="box">
    <h2>Gündem</h2>
    <div class="news-list" id="news-container"></div>
  </div>
</div>
</div>

<!-- MODERN KATEGORİLER -->
<section class="categories-section">
  <h2 class="categories-title">Kategoriler</h2>
  <div class="categories-grid" id="categoryGrid"></div>
</section>

<!-- İLLER KATEGORİSİ EN ALTA -->
<div class="box">
<h2>İller</h2>
<div class="provinces" id="province-list">
<!-- 81 İL BURAYA EKLENECEK -->
<!-- Senin mevcut liste aynı kaldı -->
</div>
</div>

<div class="currency-card">
<div class="currency-item"><span>USD</span> <span id="usd">--</span> TL</div>
<div class="currency-item"><span>EUR</span> <span id="eur">--</span> TL</div>
<div class="currency-item"><span>GBP</span> <span id="gbp">--</span> TL</div>
</div>

<footer>
<a href="about.html">Hakkımızda</a> |
<a href="privacy.html">Gizlilik Politikası</a> |
<a href="contact.html">İletişim</a>
<br>© 2025 GündemX – Gündeme Net Bakış<br>Tarafsız • Halk Odaklı • Sade Habercilik
</footer>

<script>
// LOADING
window.addEventListener("load",()=>{
  setTimeout(()=>{
    const l=document.getElementById("loading-screen");
    l.style.opacity="0";
    setTimeout(()=>l.style.display="none",300);
  },500);
});

// Döviz
async function getCurrencies(){
  try{
    const res = await fetch("https://open.er-api.com/v6/latest/TRY");
    const data = await res.json();
    document.getElementById("usd").innerText = (1 / data.rates.USD).toFixed(2);
    document.getElementById("eur").innerText = (1 / data.rates.EUR).toFixed(2);
    document.getElementById("gbp").innerText = (1 / data.rates.GBP).toFixed(2);
  }catch(e){
    console.error("Döviz alınamadı", e);
  }
}
getCurrencies();
setInterval(getCurrencies, 60000);

// Haberler ve slider
async function loadNews(){
  try{
    const res = await fetch("data/news.json?t="+Date.now());
    const newsList = await res.json();
    const sorted = newsList.sort((a,b)=>b.id - a.id);

    // SLIDER
    const slider = document.getElementById("top-slider"); slider.innerHTML="";
    sorted.slice(0,2).forEach(item=>{
      const slide = document.createElement("div"); slide.className="slide";
      slide.innerHTML = `<img src="${item.image}" alt="${item.title}"><div class="slide-content"><h2>${item.title}</h2><p>${item.city} • ${item.time}</p></div>`;
      slider.appendChild(slide);
    });
    const slides = slider.querySelectorAll('.slide'); let current=0;
    function showSlide(i){slides.forEach(s=>s.classList.remove('active'));slides[i].classList.add('active');}
    showSlide(current); setInterval(()=>{current=(current+1)%slides.length;showSlide(current);},4000);

    // ANA HABER LİSTESİ
    const newsContainer = document.getElementById("news-container");
    newsContainer.innerHTML = "";
    sorted.slice(0,5).forEach(item=>{
      const shortText = item.content.substring(0, Math.floor(item.content.length * 0.25)) + "...";
      const card = document.createElement('div'); card.className='news-card';
      card.innerHTML = `<img src="${item.image}" alt="${item.title}"><div><h3>${item.title}</h3><span>${item.city} • ${item.time}</span><p>${shortText}</p></div>`;
      card.addEventListener('click',()=>{ window.location.href=`haber.html?id=${item.id}`; });
      newsContainer.appendChild(card);
    });

    const latestNews = sorted[0];
    document.getElementById('breakingNews').innerText = "SON HABER: " + latestNews.title;
    window.latestNewsList = sorted;

  } catch(err){
    console.error("Haberler yüklenemedi:", err);
    document.getElementById("news-container").innerHTML = "<p>Haberler yüklenemedi.</p>";
  }
}
loadNews();

// İl tıklamaları
document.querySelectorAll('#province-list a').forEach(a=>{
  a.addEventListener('click',()=>{ window.location.href=`il.html?id=${a.dataset.city}`; });
});

// KATEGORİLER
const categories = ["Gündem","Siyaset","Ekonomi","Trafik","Türkiye Geneli"];
fetch("data/news.json?t="+Date.now())
.then(res=>res.json())
.then(data=>{
  const grid = document.getElementById("categoryGrid");
  categories.forEach(cat=>{
    const latestNews = data.filter(n=>n.category===cat).sort((a,b)=>new Date(b.time)-new Date(a.time))[0];
    if(!latestNews) return;
    const shortText = latestNews.content.substring(0, Math.floor(latestNews.content.length * 0.3)) + "...";
    grid.innerHTML += `
      <a href="category.html?category=${encodeURIComponent(cat)}" style="text-decoration:none;color:inherit">
        <div class="category-card">
          <img src="${latestNews.image}" alt="${latestNews.title}">
          <div class="category-content">
            <div class="category-name">${cat}</div>
            <h3>${latestNews.title}</h3>
            <p>${shortText}</p>
          </div>
        </div>
      </a>
    `;
  });
});
</script>

</body>
</html>