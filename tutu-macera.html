<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Tutunun Macerasƒ±</title>
<style>
body { margin:0; padding:0; font-family: Arial, sans-serif; background:#87ceeb; overflow:hidden; }
#gameContainer { position: relative; width: 100vw; height: 100vh; background: #87ceeb; }
#player { position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%); width: 50px; height: 50px; background: red; border-radius: 50%; transition: bottom 0.1s, left 0.1s; }
.heart { position: absolute; width: 30px; height: 30px; background: pink; border-radius: 50%; }
.obstacle { position: absolute; width: 40px; height: 40px; background: black; border-radius: 10%; }
#scoreBoard { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); font-size: 20px; font-weight:bold; color:#fff; }
#message { position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); font-size: 30px; color:yellow; display:none; text-align:center;}
</style>
</head>
<body>

<div id="gameContainer">
  <div id="player"></div>
  <div id="scoreBoard">Kalpler: 0 / 30</div>
  <div id="message"></div>
</div>

<script>
const gameContainer = document.getElementById('gameContainer');
const player = document.getElementById('player');
const scoreBoard = document.getElementById('scoreBoard');
const message = document.getElementById('message');

let score = 0;
let hearts = [];
let obstacles = [];
let gameInterval;
let gameSpeed = 2;
let maxHearts = 30;

// Player hareketi
let playerX = window.innerWidth / 2 - 25;
let playerY = window.innerHeight - 100;

function movePlayer(x,y){
  playerX = Math.min(Math.max(0, x), window.innerWidth - 50);
  playerY = Math.min(Math.max(0, y), window.innerHeight - 50);
  player.style.left = playerX + 'px';
  player.style.top = playerY + 'px';
}

// Kalp olu≈ütur
function createHeart(){
  const heart = document.createElement('div');
  heart.className = 'heart';
  heart.style.left = Math.random() * (window.innerWidth - 30) + 'px';
  heart.style.top = '-30px';
  gameContainer.appendChild(heart);
  hearts.push(heart);
}

// Engel olu≈ütur
function createObstacle(){
  const obs = document.createElement('div');
  obs.className = 'obstacle';
  obs.style.left = Math.random() * (window.innerWidth - 40) + 'px';
  obs.style.top = '-40px';
  gameContainer.appendChild(obs);
  obstacles.push(obs);
}

// √áarpƒ±≈üma kontrol√º
function checkCollision(a, b){
  const aRect = a.getBoundingClientRect();
  const bRect = b.getBoundingClientRect();
  return !(aRect.right < bRect.left || 
           aRect.left > bRect.right || 
           aRect.bottom < bRect.top || 
           aRect.top > bRect.bottom);
}

// Oyun d√∂ng√ºs√º
function gameLoop(){
  // Kalpleri hareket ettir
  hearts.forEach((heart, idx) => {
    let top = parseFloat(heart.style.top);
    top += gameSpeed;
    heart.style.top = top + 'px';
    if(checkCollision(player, heart)){
      heart.remove();
      hearts.splice(idx,1);
      score++;
      scoreBoard.textContent = `Kalpler: ${score} / ${maxHearts}`;
      if(score % 10 === 0) gameSpeed += 0.5; // Hƒ±z artƒ±≈üƒ±
      if(score >= maxHearts){
        endGame();
      }
    } else if(top > window.innerHeight){
      heart.remove();
      hearts.splice(idx,1);
    }
  });

  // Engelleri hareket ettir
  obstacles.forEach((obs, idx)=>{
    let top = parseFloat(obs.style.top);
    top += gameSpeed;
    obs.style.top = top + 'px';
    if(checkCollision(player, obs)){
      obs.style.background = 'red';
      player.style.background = 'orange';
      setTimeout(()=>{player.style.background='red'; obs.style.background='black';},300);
    }
    if(top > window.innerHeight){
      obs.remove();
      obstacles.splice(idx,1);
    }
  });
}

// Oyun biti≈üi
function endGame(){
  clearInterval(gameInterval);
  hearts.forEach(h=>h.remove());
  obstacles.forEach(o=>o.remove());
  message.style.display = 'block';
  message.textContent = 'Tebrikler! Tutu mutlu yatƒ±yor üéâ';
}

// Oyunu ba≈ülat
function startGame(){
  score = 0;
  gameSpeed = 2;
  scoreBoard.textContent = `Kalpler: ${score} / ${maxHearts}`;
  gameInterval = setInterval(gameLoop, 20);
  setInterval(()=>{createHeart(); createObstacle();},1000);
}

// Mouse / touch hareketi
document.addEventListener('mousemove', e => movePlayer(e.clientX - 25, playerY));
document.addEventListener('touchmove', e => {
  const touch = e.touches[0];
  movePlayer(touch.clientX - 25, playerY);
});

// Basƒ±lƒ± tutunca oyun ba≈ülat
let holdTime = 0;
const holdThreshold = 500; // 0.5 saniye

const logo = document.querySelector('.logo');
logo.addEventListener('mousedown', ()=>{
  holdTime = Date.now();
});
logo.addEventListener('mouseup', ()=>{
  if(Date.now() - holdTime >= holdThreshold){
    startGame();
    message.style.display='none';
  }
});
logo.addEventListener('touchstart', ()=>{ holdTime = Date.now(); });
logo.addEventListener('touchend', ()=>{
  if(Date.now() - holdTime >= holdThreshold){
    startGame();
    message.style.display='none';
  }
});
</script>
</body>
</html>