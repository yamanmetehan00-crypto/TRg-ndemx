<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Hava Durumu 24 Saat ‚Äì G√ºndemX</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: Inter, Arial, sans-serif;
  background: #f4f7fb;
  color: #1e293b;
  margin: 0;
  padding: 20px;
}
.weather-container {
  max-width: 500px;
  margin: 40px auto;
  background: #0b1220;
  color: #fff;
  border-radius: 12px;
  padding: 20px;
  text-align: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
.weather-container h2 {
  margin: 0 0 15px;
  color: #00aaff;
  font-size: 26px;
}
.hourly-forecast {
  margin-top: 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-height: 450px;
  overflow-y: auto;
}
.forecast-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #1e293b;
  padding: 10px;
  border-radius: 8px;
}
.forecast-time {
  font-weight: bold;
}
.forecast-temp {
  font-size: 18px;
}
</style>
</head>
<body>

<div class="weather-container">
  <h2 id="cityTitle">ƒ∞stanbul ‚Äì 24 Saatlik Hava Durumu</h2>
  <div class="hourly-forecast" id="hourly-forecast">Y√ºkleniyor...</div>
</div>

<script>
async function getHourlyWeather() {

  const IST_LAT = 41.0082;
  const IST_LON = 28.9784;

  function renderWeather(data) {
    const container = document.getElementById("hourly-forecast");
    container.innerHTML = "";

    for (let i = 0; i < 24; i++) {
      const time = new Date(data.hourly.time[i]);
      const hour = time.getHours().toString().padStart(2,"0") + ":00";
      const temp = Math.round(data.hourly.temperature_2m[i]);

      const item = document.createElement("div");
      item.className = "forecast-item";
      item.innerHTML = `
        <span class="forecast-time">${hour}</span>
        <span>üå§Ô∏è</span>
        <span class="forecast-temp">${temp}¬∞C</span>
      `;
      container.appendChild(item);
    }
  }

  async function fetchWeather(lat, lon) {
    try {
      const res = await fetch(
        `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&hourly=temperature_2m&timezone=Europe/Istanbul`
      );
      const data = await res.json();
      renderWeather(data);
    } catch {
      document.getElementById("hourly-forecast").innerText = "Hava durumu alƒ±namadƒ±";
    }
  }

  // ƒ∞l adƒ± arka planda (hata olsa bile sayfa √ßalƒ±≈üƒ±r)
  async function setCityName(lat, lon) {
    try {
      const res = await fetch(
        `https://geocoding-api.open-meteo.com/v1/reverse?latitude=${lat}&longitude=${lon}&language=tr`
      );
      const data = await res.json();
      if (data.results && data.results[0]) {
        document.getElementById("cityTitle").innerText =
          data.results[0].name + " ‚Äì 24 Saatlik Hava Durumu";
      }
    } catch {}
  }

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      pos => {
        fetchWeather(pos.coords.latitude, pos.coords.longitude);
        setCityName(pos.coords.latitude, pos.coords.longitude);
      },
      () => {
        fetchWeather(IST_LAT, IST_LON);
        setCityName(IST_LAT, IST_LON);
      },
      { timeout: 5000 }
    );
  } else {
    fetchWeather(IST_LAT, IST_LON);
    setCityName(IST_LAT, IST_LON);
  }
}

getHourlyWeather();
</script>

</body>
</html>